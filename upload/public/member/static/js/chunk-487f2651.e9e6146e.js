(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-487f2651"],{5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){s(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},"63b1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",[a("company-title",[t._v(" 企业风采 "),a("div",{staticClass:"wxCode"},[t._v(" 手机传图更方便，使用微信扫码上传 "),a("div",{staticClass:"codeImg"},[a("span",{staticClass:"triangle"}),a("img",{attrs:{src:t.scanQrcode}}),a("p",[t._v("微信扫描二维码"),a("br"),t._v(" 快速上传手机相册图片 ")])])])]),a("el-alert",{attrs:{title:"最多可上传6张企业风采图片",type:"warning",closable:!1,"show-icon":""}}),a("div",{staticClass:"imgList_warpper"},[t._l(t.imgList,(function(e,s){return a("div",{key:s,staticClass:"img-item"},[a("el-image",{staticStyle:{width:"148px",height:"148px"},attrs:{src:e.img_src,"preview-src-list":t.srcList}}),a("div",{staticClass:"removeIcon",on:{click:function(a){return t.handleRemove(e,a)}}}),1!==parseInt(e.audit)?a("div",{staticClass:"img-mask"},[t._v(t._s(e.audit_text?e.audit_text:"待审核"))]):t._e()],1)})),a("el-upload",{staticClass:"imgList img_up_ico",attrs:{"show-file-list":!1,action:"#","list-type":"picture-card","http-request":t.handlerUpload,"on-exceed":t.handlerMax}},[a("i",{staticClass:"el-icon-plus"}),a("p",[t._v("上传风采")])]),a("div",{staticClass:"clear"})],2)],1)},i=[],n=(a("c975"),a("b680"),a("ac1f"),a("1276"),a("5530")),r=a("751a"),c=a("d722"),o={data:function(){return{imgList:[],srcList:[],timer:"",scanQrcode:""}},created:function(){clearInterval(this.timer),this.fetchData();var t=this.$store.state.config.mobile_domain+"scan_upload?type=company_img&access="+this.$store.state.userToken;t=encodeURIComponent(t),this.scanQrcode=window.global.RequestBaseUrl+c["a"].get_qrcode+"?type=normal&url="+t},mounted:function(){this.timer=setInterval(this.scanUploadResult,5e3)},beforeDestroy:function(){clearInterval(this.timer)},methods:{scanUploadResult:function(){var t=this;r["a"].post(c["a"].scan_upload_result,{type:"company_img"}).then((function(e){0!=e.data&&t.fetchData()})).catch((function(){}))},fetchData:function(){var t=this;r["a"].get(c["a"].company_profile,{}).then((function(e){var a=Object(n["a"])({},e.data),s=a.img_list;t.imgList=s;for(var i=0;i<t.imgList.length;i++){var r=t.imgList[i];t.srcList[i]=r.img_src}})).catch((function(){}))},handlerUpload:function(t){var e=this,a=t.file,s=(a.type||"").split("/"),i=s[1],n=["png","jpg","jpeg","bmp","gif"];if(-1==n.indexOf(i))return this.$message.error("文件类型不支持"),!1;if(a.size>1024*this.$store.state.config.fileupload_size){var o=this.$store.state.config.fileupload_size/1024;return o=o.toFixed(1),this.$message.error("文件大小超出限制，最大"+o+"mb"),!1}r["a"].postFormData(c["a"].company_img_upload,{file:a}).then((function(t){200===parseInt(t.code)?(e.$message({type:"success",message:t.message}),e.fetchData()):e.$message.error(t.message)})).catch((function(t){console.log(t)}))},handleRemove:function(t){var e=this;this.$confirm("确定删除该风采照片吗","系统提示",{type:"warning"}).then((function(){r["a"].post(c["a"].company_img_del,{id:t.id}).then((function(t){200===parseInt(t.code)?(e.$message({type:"success",message:t.message}),e.fetchData()):e.$message.error(t.message)})).catch((function(t){console.log(t)}))})).catch((function(){}))},handlerMax:function(t,e){e.length>=6&&this.$message.error("最多可上传6张企业风采图片")}}},l=o,u=(a("9b90"),a("2877")),f=Object(u["a"])(l,s,i,!1,null,"0a58c5fa",null);e["default"]=f.exports},"9b90":function(t,e,a){"use strict";var s=a("a8c3"),i=a.n(s);i.a},a8c3:function(t,e,a){},dbb4:function(t,e,a){var s=a("23e7"),i=a("83ab"),n=a("56ef"),r=a("fc6a"),c=a("06cf"),o=a("8418");s({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,a,s=r(t),i=c.f,l=n(s),u={},f=0;while(l.length>f)a=i(s,e=l[f++]),void 0!==a&&o(u,e,a);return u}})},e439:function(t,e,a){var s=a("23e7"),i=a("d039"),n=a("fc6a"),r=a("06cf").f,c=a("83ab"),o=i((function(){r(1)})),l=!c||o;s({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(t,e){return r(n(t),e)}})}}]);