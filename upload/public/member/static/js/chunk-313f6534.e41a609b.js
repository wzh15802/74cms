(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-313f6534"],{3555:function(e,t,s){},"861b":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c975"),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a15b"),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_1__),trtc_js_sdk__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5781"),trtc_js_sdk__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(trtc_js_sdk__WEBPACK_IMPORTED_MODULE_2__),_utils_http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("751a"),_api__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d722");__webpack_exports__["a"]={name:"Test",data:function(){return{isChrome:!0,client:"",userId:"",roomId:"74_"+parseInt(1e8*Math.random()),localStream:"",audio:!0,video:!0,interview_id:0,config:{appid:"",sig:""},netCheckResult:"网络检测中...",netCheckStatus:!1,audioPlayShow:!0,volmueTimer:"",volume:1,error:0,camerasList:[],camerasName:"默认 - 摄像头",microphonesList:[],microphoneName:"默认 - 麦克风阵列",speakersList:[],speakerName:"默认 - 扬声器"}},created:function(){this.isChrome=navigator.userAgent.indexOf("Chrome")>-1,this.interview_id=this.$route.params.interview_id,this.getConfig()},mounted:function(){},methods:{detectVolume:function(e){var t=this;this.volmueTimer=window.setInterval((function(){t.volume=100*e.getAudioLevel()}),600)},audioPlay:function(){this.$refs.sampleMusic.play(),this.audioPlayShow=!this.audioPlayShow},audioPaused:function(){this.$refs.sampleMusic.pause(),this.audioPlayShow=!this.audioPlayShow},getConfig:function(){var e=this;_utils_http__WEBPACK_IMPORTED_MODULE_3__["a"].post(_api__WEBPACK_IMPORTED_MODULE_4__["a"].rtc_config).then((function(t){e.config.appid=t.data.appid,e.config.sig=t.data.sig,e.userId=t.data.userid,e.netCheckStatus=!0,e.netCheckResult=e.netCheckStatus?"您当前的网络质量较好，可以进行视频面试":"您当前的网络质量比较差，建议更换网络环境",e.error=t.data.error,e.createClient()})).catch((function(){}))},createClient:function(){var e=this.config.appid,t=this.config.sig,s=this.userId;this.client=trtc_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.createClient({mode:"videoCall",sdkAppId:e,userId:s,userSig:t}),console.warn("链接成功，准备加入房间"),this.joinRoom(this.client,this.roomId)},createStream:function(e){var t=this,s=trtc_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.createStream({userId:e,audio:this.audio,video:this.video,facingMode:"user"});s.setVideoProfile("720p"),this.localStream=s,trtc_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.getCameras().then((function(e){t.camerasList=e,t.camerasName=e[0].label})),trtc_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.getMicrophones().then((function(e){t.microphonesList=e,t.microphoneName=e[0].label})),trtc_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.getSpeakers().then((function(e){t.speakersList=e,t.speakerName=e[0].label})),s.initialize().catch((function(e){console.error("初始化本地流失败 "+e)})).then((function(){console.warn("初始化本地流成功，准备发布本地流"),t.publishStream(s,t.client),s.play("local_stream"),t.detectVolume(s)}))},joinRoom:function(e,t){var s=this;e.join({roomId:t}).catch((function(e){console.error("进房失败 "+e)})).then((function(){console.warn("进房成功，准备创建本地流"),s.createStream(s.userId)}))},publishStream:function(e,t){t.publish(e).catch((function(e){console.error("本地流发布失败 "+e)})).then((function(){console.warn("本地流发布成功")}))},changeDevice:function(e,t){1===e?(this.microphoneName=this.microphonesList[t].label,this.switchLocalDevice(e,this.microphonesList[t].deviceId)):0===e&&(this.camerasName=this.camerasList[t].label,this.switchLocalDevice(e,this.camerasList[t].deviceId))},switchLocalDevice:function switchLocalDevice(type,dId){var _this4=this;0===eval(type)?this.localStream.switchDevice("video",dId).then((function(){_this4.$message({type:"success",message:"设备切换成功"})})):1===eval(type)&&this.localStream.switchDevice("audio",dId).then((function(){_this4.$message({type:"success",message:"设备切换成功"})}))}}}},b5d0:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"vi_head"},[i("div",{staticClass:"head_content"},[i("a",{attrs:{href:""}},[i("img",{staticClass:"hc_logo",attrs:{src:e.$store.state.config.logo,alt:"logo"}})]),i("div",{staticClass:"hc_logo_vi"}),i("a",{staticClass:"hc_back_home",attrs:{href:e.$store.state.config.link_url_web.index}},[e._v("返回网站")]),i("a",{staticClass:"hc_contact"},[e._v("联系电话："+e._s(e.$store.state.config.contact_tel))]),i("a",{staticClass:"hc_detect",attrs:{href:""}},[e._v("设备检测")])])]),i("div",{staticClass:"vi_container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isChrome,expression:"!isChrome"}],staticClass:"tip"},[e._v(" 为提高视频面试效率，建议您使用谷歌内核浏览器并提前检测您的设备是否能够正常连通 ")]),i("div",{staticClass:"device_detect_group"},[i("div",{staticClass:"group_title"},[e._v("视频面试·设备检测")]),i("div",{staticClass:"detect_list"},[i("div",{staticClass:"list_line",attrs:{id:"video_grid"}},[i("div",{staticClass:"line_title t1"},[e._v("摄像头检测")]),i("div",{class:e.camerasList.length>1?"line_li":"line_li disable"},[e.camerasList.length>1?i("el-dropdown",{attrs:{placement:"bottom"}},[i("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.camerasName)+" ")]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.camerasList,(function(t,s){return i("el-dropdown-item",{key:s,nativeOn:{click:function(s){return e.changeDevice(t)}}},[e._v(" "+e._s(t.label)+" ")])})),1)],1):i("span",[e._v(e._s(e.camerasName))])],1),i("div",{staticClass:"detect_result",attrs:{id:"local_stream"}})]),i("div",{staticClass:"list_line"},[i("div",{staticClass:"line_title t2"},[e._v(" 麦克风 (请说话，并观察右侧音量条是否变化) ")]),i("div",{class:e.microphonesList.length>1?"line_li":"line_li disable"},[e.microphonesList.length>1?i("el-dropdown",{attrs:{placement:"bottom"}},[i("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.microphoneName)+" ")]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.microphonesList,(function(t,s){return i("el-dropdown-item",{key:s,nativeOn:{click:function(t){return e.changeDevice(1,s)}}},[e._v(" "+e._s(t.label)+" ")])})),1)],1):i("span",[e._v(e._s(e.microphoneName))])],1),i("div",{staticClass:"detect_result"},[i("div",{staticClass:"volume_bar"},[i("div",{staticClass:"volume_contetn"},[i("div",{staticClass:"volume_auto",style:{width:e.volume+"%"}})])])])]),i("div",{staticClass:"list_line"},[i("div",{staticClass:"line_title t4"},[e._v(" 扬声器 (播放测试音频，并观察是否可以听到声音) ")]),i("div",{staticClass:"line_li disable"},[e._v(" "+e._s(e.speakerName)+" ")]),i("div",{staticClass:"detect_result"},[i("audio",{ref:"sampleMusic",staticClass:"audio",attrs:{loop:"loop",controls:"controls"}},[i("source",{attrs:{src:s("e172"),type:"audio/mp3"}}),e._v(" Your browser does not support the audio tag. ")]),e.audioPlayShow?i("div",{staticClass:"test_play",on:{click:e.audioPlay}},[e._v("播放测试音频")]):i("div",{staticClass:"test_playing",on:{click:e.audioPaused}},[e._v("正在播放")])])]),i("div",{staticClass:"list_line"},[i("div",{staticClass:"line_title t3"},[e._v("网络检测")]),i("div",{staticClass:"line_li not"},[i("span",{class:e.netCheckStatus?"good":"bad"},[e._v(e._s(e.netCheckResult))])]),i("div",{staticClass:"detect_result"},[i("div",{staticClass:"network_check"},[i("div",{class:e.netCheckStatus?"check_ico checked":"check_ico"}),i("div",[e._v(e._s(e.netCheckStatus?"网络检测完成":"网络检测中..."))])])])])]),1!==e.error?i("router-link",{staticClass:"jump_room",attrs:{to:"/video/"+e.interview_id}},[e._v("进入面试")]):e._e()],1)])])},a=[],_=s("861b"),o=_["a"],c=(s("fff0"),s("2877")),n=Object(c["a"])(o,i,a,!1,null,"8770f954",null);t["default"]=n.exports},e172:function(e,t,s){e.exports=s.p+"static/media/music.b8d218cf.mp3"},fff0:function(e,t,s){"use strict";var i=s("3555"),a=s.n(i);a.a}}]);