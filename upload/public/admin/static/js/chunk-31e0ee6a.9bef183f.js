(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31e0ee6a"],{2234:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],ref:"form",staticClass:"common-form",attrs:{model:e.form,"label-width":"120px",rules:e.rules,"inline-message":!0}},[o("el-divider",{attrs:{"content-position":"left"}},[e._v(" 企业信息 ")]),o("el-form-item",{attrs:{label:"公司名称",prop:"companyname"}},[o("el-input",{model:{value:e.form.companyname,callback:function(t){e.$set(e.form,"companyname",t)},expression:"form.companyname"}})],1),!0===e.live_fields.short_name?o("el-form-item",{attrs:{label:"公司简称",prop:"short_name"}},[o("el-input",{model:{value:e.form.short_name,callback:function(t){e.$set(e.form,"short_name",t)},expression:"form.short_name"}})],1):e._e(),o("el-form-item",{attrs:{label:"认证状态",prop:"audit"}},[o("el-radio-group",{model:{value:e.form.audit,callback:function(t){e.$set(e.form,"audit",t)},expression:"form.audit"}},e._l(e.options_audit,(function(t,r){return o("el-radio",{key:r,attrs:{label:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),!0===e.live_fields.logo?o("el-form-item",{attrs:{label:"Logo",prop:"logo"}},[o("el-upload",{staticClass:"logo-uploader",attrs:{action:e.apiUpload,headers:e.headers,"show-file-list":!1,"on-success":e.handleLogoSuccess,"before-upload":e.beforeLogoUpload}},[e.form.logo?o("img",{staticClass:"logo",attrs:{src:e.logoUrl}}):o("i",{staticClass:"el-icon-plus logo-uploader-icon"})]),o("span",{staticClass:"smalltip"},[o("i",{staticClass:"el-icon-info"}),e._v(" 建议尺寸120*120 ")])],1):e._e(),o("el-form-item",{attrs:{label:"企业性质",prop:"nature"}},[o("el-select",{attrs:{placeholder:"请选择企业性质"},model:{value:e.form.nature,callback:function(t){e.$set(e.form,"nature",t)},expression:"form.nature"}},e._l(e.options_nature,(function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{attrs:{label:"公司规模",prop:"scale"}},[o("el-select",{attrs:{placeholder:"请选择公司规模"},model:{value:e.form.scale,callback:function(t){e.$set(e.form,"scale",t)},expression:"form.scale"}},e._l(e.options_scale,(function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{attrs:{label:"所属行业",prop:"trade"}},[o("el-select",{attrs:{placeholder:"请选择所属行业"},model:{value:e.form.trade,callback:function(t){e.$set(e.form,"trade",t)},expression:"form.trade"}},e._l(e.options_trade,(function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),!0===e.live_fields.registered?o("el-form-item",{attrs:{label:"注册资金",prop:"registered"}},[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入注册资金"},model:{value:e.form.registered,callback:function(t){e.$set(e.form,"registered",t)},expression:"form.registered"}},[o("el-select",{staticClass:"input-sel",attrs:{slot:"append",placeholder:"请选择"},slot:"append",model:{value:e.form.currency,callback:function(t){e.$set(e.form,"currency",t)},expression:"form.currency"}},[o("el-option",{attrs:{label:"万人民币",value:"0"}}),o("el-option",{attrs:{label:"万美元",value:"1"}})],1)],1)],1):e._e(),!0===e.live_fields.info.website?o("el-form-item",{attrs:{label:"公司网址",prop:"info.website"}},[o("el-input",{model:{value:e.form.info.website,callback:function(t){e.$set(e.form.info,"website",t)},expression:"form.info.website"}})],1):e._e(),!0===e.live_fields.tag?o("el-form-item",{attrs:{label:"企业福利",prop:"tag"}},[o("el-select",{staticClass:"tag-input",attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择企业福利","multiple-limit":10},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}},e._l(e.options_tag,(function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),o("el-form-item",{attrs:{label:"所在地区",prop:"citycategory_arr"}},[o("el-cascader",{attrs:{options:e.options_citycategory,"show-all-levels":!1},model:{value:e.form.citycategory_arr,callback:function(t){e.$set(e.form,"citycategory_arr",t)},expression:"form.citycategory_arr"}})],1),o("el-form-item",{attrs:{label:"联系地址",prop:"info.address"}},[o("el-input",{model:{value:e.form.info.address,callback:function(t){e.$set(e.form.info,"address",t)},expression:"form.info.address"}})],1),!0===e.live_fields.info.short_desc?o("el-form-item",{attrs:{label:"公司简介",prop:"info.short_desc"}},[o("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.form.info.short_desc,callback:function(t){e.$set(e.form.info,"short_desc",t)},expression:"form.info.short_desc"}})],1):e._e(),!0===e.live_fields.info.content?o("el-form-item",{attrs:{label:"公司介绍",prop:"info.content"}},[o("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.form.info.content,callback:function(t){e.$set(e.form.info,"content",t)},expression:"form.info.content"}})],1):e._e(),o("el-divider",{attrs:{"content-position":"left"}},[e._v(" 联系信息 ")]),o("el-form-item",{attrs:{label:"联系人",prop:"contact.contact"}},[o("el-input",{model:{value:e.form.contact.contact,callback:function(t){e.$set(e.form.contact,"contact",t)},expression:"form.contact.contact"}})],1),o("el-form-item",{attrs:{label:"联系手机",prop:"contact.mobile"}},[o("el-input",{model:{value:e.form.contact.mobile,callback:function(t){e.$set(e.form.contact,"mobile",t)},expression:"form.contact.mobile"}})],1),!0===e.live_fields.contact.weixin?o("el-form-item",{attrs:{label:"联系微信",prop:"contact.weixin"}},[o("el-input",{model:{value:e.form.contact.weixin,callback:function(t){e.$set(e.form.contact,"weixin",t)},expression:"form.contact.weixin"}})],1):e._e(),!0===e.live_fields.contact.telephone?o("el-form-item",{attrs:{label:"联系固话",prop:"contact.telephone"}},[o("el-input",{model:{value:e.form.contact.telephone,callback:function(t){e.$set(e.form.contact,"telephone",t)},expression:"form.contact.telephone"}})],1):e._e(),!0===e.live_fields.contact.email?o("el-form-item",{attrs:{label:"联系邮箱",prop:"contact.email"}},[o("el-input",{model:{value:e.form.contact.email,callback:function(t){e.$set(e.form.contact,"email",t)},expression:"form.contact.email"}})],1):e._e(),!0===e.live_fields.contact.qq?o("el-form-item",{attrs:{label:"联系QQ",prop:"contact.qq"}},[o("el-input",{model:{value:e.form.contact.qq,callback:function(t){e.$set(e.form.contact,"qq",t)},expression:"form.contact.qq"}})],1):e._e(),o("el-form-item",{attrs:{label:""}},[o("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.onSubmit("form")}}},[e._v(" 保存 ")]),o("el-button",{on:{click:function(t){return e.goto("/user/company/list")}}},[e._v(" 返回 ")])],1)],1)],1)},a=[],i=(o("caad"),o("d81d"),o("d3b7"),o("ac1f"),o("2532"),o("3ca3"),o("1276"),o("ddb0"),o("2b3d"),o("5530")),n=o("2909"),l=o("1063"),s=o("fcac"),c=o("61f7"),u=o("5f87"),m=o("52b5"),f=o("d722"),d={data:function(){var e=function(e,t,o){""==t&&o(),Object(c["d"])(t)?o():o(new Error("请输入正确的网址"))},t=function(e,t,o){Object(c["c"])(t)?o():o(new Error("请输入正确的手机号"))},o=function(e,t,o){Object(c["b"])(t)?o():o(new Error("请输入正确的邮箱"))};return{infoLoading:!0,submitLoading:!1,headers:{admintoken:Object(u["b"])()},fileupload_size:"",fileupload_ext:"",apiUpload:window.global.RequestBaseUrl+f["a"].upload,options_audit:[],options_nature:[],options_trade:[],options_citycategory:[],options_scale:[],options_tag:[],live_fields:{logo:!0,short_name:!0,registered:!0,tag:!0,contact:{weixin:!0,telephone:!0,qq:!0,email:!0},info:{website:!0,short_desc:!0,content:!0}},form:{companyname:"",short_name:"",nature:"",trade:"",logo:"",citycategory_arr:"",scale:"",registered:"",currency:"0",tag:[],audit:0,contact:{contact:"",mobile:"",weixin:"",telephone:"",qq:"",email:""},info:{website:"",short_desc:"",content:"",address:""}},logoUrl:"",rules:{logo:[{required:!0,message:"请上传logo",trigger:"blur"}],companyname:[{required:!0,message:"请输入公司名称",trigger:"blur"},{max:60,message:"长度在 1 到 60 个字符",trigger:"blur"}],short_name:[{required:!0,message:"请输入公司简称",trigger:"blur"},{max:60,message:"长度在 1 到 60 个字符",trigger:"blur"}],nature:[{required:!0,message:"请选择公司性质",trigger:"change"}],trade:[{required:!0,message:"请选择所属行业",trigger:"change"}],citycategory_arr:[{required:!0,message:"请选择所在地区",trigger:"change"}],scale:[{required:!0,message:"请选择公司规模",trigger:"change"}],registered:[{required:!0,message:"请输入注册资金",trigger:"blur"},{max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],tag:[{required:!0,message:"请选择企业福利",trigger:"change"}],contact:{contact:[{required:!0,message:"请输入联系人",trigger:"blur"},{max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系手机",trigger:"blur"},{validator:t,trigger:"blur"}],weixin:[{required:!0,message:"请输入微信",trigger:"blur"}],telephone:[{required:!0,message:"请输入联系座机",trigger:"blur"}],qq:[{required:!0,message:"请输入联系QQ",trigger:"blur"}],email:[{required:!0,message:"请输入联系邮箱",trigger:"blur"},{validator:o,trigger:"blur"}]},info:{website:[{required:!0,message:"请输入公司网址",trigger:"blur"},{max:200,message:"长度在 0 到 200 个字符",trigger:"blur"},{validator:e,trigger:"blur"}],short_desc:[{required:!0,message:"请输入公司简介",trigger:"blur"},{max:255,message:"长度在 0 到 255 个字符",trigger:"blur"}],content:[{required:!0,message:"请输入公司介绍",trigger:"blur"}],address:[{required:!0,message:"请输入公司地址",trigger:"blur"},{max:255,message:"长度在 0 到 255 个字符",trigger:"blur"}]}}}},computed:{config:function(){return this.$store.state.config}},created:function(){this.fileupload_size=this.config.fileupload_size,this.fileupload_ext=this.config.fileupload_ext,this.fetchData()},methods:{fetchData:function(){var e=this;Object(l["c"])({},"get").then((function(t){var o=t.data;return 0==o.Company.logo.is_display?(e.live_fields.logo=!1,e.rules.logo=[]):0==o.Company.logo.is_require&&(e.rules.logo=[]),0==o.Company.short_name.is_display?(e.live_fields.short_name=!1,e.rules.short_name=[]):0==o.Company.short_name.is_require&&(e.rules.short_name=[]),0==o.Company.registered.is_display?(e.live_fields.registered=!1,e.rules.registered=[]):0==o.Company.registered.is_require&&(e.rules.registered=[]),0==o.Company.tag.is_display?(e.live_fields.tag=!1,e.rules.tag=[]):0==o.Company.tag.is_require&&(e.rules.tag=[]),0==o.CompanyInfo.website.is_display?(e.live_fields.info.website=!1,e.rules.info.website=[]):0==o.CompanyInfo.website.is_require&&(e.rules.info.website=[]),0==o.CompanyInfo.short_desc.is_display?(e.live_fields.info.short_desc=!1,e.rules.info.short_desc=[]):0==o.CompanyInfo.short_desc.is_require&&(e.rules.info.short_desc=[]),0==o.CompanyInfo.content.is_display?(e.live_fields.info.content=!1,e.rules.info.content=[]):0==o.CompanyInfo.content.is_require&&(e.rules.info.content=[]),0==o.CompanyContact.weixin.is_display?(e.live_fields.contact.weixin=!1,e.rules.contact.weixin=[]):0==o.CompanyContact.weixin.is_require&&(e.rules.contact.weixin=[]),0==o.CompanyContact.telephone.is_display?(e.live_fields.contact.telephone=!1,e.rules.contact.telephone=[]):0==o.CompanyContact.telephone.is_require&&(e.rules.contact.telephone=[]),0==o.CompanyContact.qq.is_display?(e.live_fields.contact.qq=!1,e.rules.contact.qq=[]):0==o.CompanyContact.qq.is_require&&(e.rules.contact.qq=[]),0==o.CompanyContact.email.is_display?(e.live_fields.contact.email=!1,e.rules.contact.email=[]):0==o.CompanyContact.email.is_require&&(e.rules.contact.email=[]),Object(m["a"])({type:"companyAudit,companyNature,trade,citycategory,companyScale,jobTag,setmealList"})})).then((function(t){return e.options_audit=Object(n["a"])(t.data.companyAudit),e.options_nature=Object(n["a"])(t.data.companyNature),e.options_trade=Object(n["a"])(t.data.trade),e.options_citycategory=Object(n["a"])(t.data.citycategory),e.options_citycategory=e.options_citycategory.map((function(e){if(e.children.length){var t=e.children;return t=t.map((function(e){return e.children.length?{label:e.label,value:e.value,children:e.children}:{label:e.label,value:e.value}})),{value:e.value,label:e.label,children:t}}return{value:e.value,label:e.label}})),e.options_scale=Object(n["a"])(t.data.companyScale),e.options_tag=Object(n["a"])(t.data.jobTag),e.options_setmeal=Object(n["a"])(t.data.setmealList),Object(s["e"])({id:e.$route.query.id},"get")})).then((function(t){e.form=Object(i["a"])({},t.data.info),e.logoUrl=t.data.logoUrl,e.form.currency=e.form.currency+"",e.form.citycategory_arr=[],e.form.tag=""==e.form.tag?[]:e.form.tag.split(",");for(var o=0;o<e.form.tag.length;o++)e.form.tag[o]=parseInt(e.form.tag[o]);0!=t.data.info.district1&&e.form.citycategory_arr.push(t.data.info.district1),0!=t.data.info.district2&&e.form.citycategory_arr.push(t.data.info.district2),0!=t.data.info.district3&&e.form.citycategory_arr.push(t.data.info.district3),e.infoLoading=!1})).catch((function(){}))},onSubmit:function(e){var t=this;if(!0===this.submitLoading)return!1;this.submitLoading=!0;var o=this,r=Object(i["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;var a=t.form.citycategory_arr;r.district1=a[0],r.district2=void 0!==a[1]?a[1]:0,r.district3=void 0!==a[2]?a[2]:0,r.contact=Object(i["a"])({},t.form.contact),Object(s["e"])(r).then((function(e){return t.$message.success(e.message),setTimeout((function(){o.$router.push("/user/company/list")}),1500),!0})).catch((function(){t.submitLoading=!1}))}))},handleLogoSuccess:function(e,t){if(200!=e.code)return this.$message.error(e.message),!1;this.logoUrl=URL.createObjectURL(t.raw),this.form.logo=e.data.file_id},beforeLogoUpload:function(e){var t=e.type.split("/"),o=t[1],r=this.fileupload_ext.split(",");return r.includes(o)?!(e.size/1024>this.fileupload_size)||(this.$message.error("上传文件最大为".concat(this.fileupload_size,"kb")),!1):(this.$message.error("上传文件格式不允许"),!1)},goto:function(e){this.$router.push(e)}}},p=d,g=(o("788f"),o("2877")),b=Object(g["a"])(p,r,a,!1,null,"2456c126",null);t["default"]=b.exports},"52b5":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var r=o("b775"),a=o("d722");function i(e){return Object(r["a"])({url:a["a"].getClassify,method:"get",params:e})}},"788f":function(e,t,o){"use strict";var r=o("e3f8"),a=o.n(r);a.a},e3f8:function(e,t,o){},fcac:function(e,t,o){"use strict";o.d(t,"k",(function(){return i})),o.d(t,"a",(function(){return n})),o.d(t,"e",(function(){return l})),o.d(t,"b",(function(){return s})),o.d(t,"h",(function(){return c})),o.d(t,"f",(function(){return u})),o.d(t,"g",(function(){return m})),o.d(t,"i",(function(){return f})),o.d(t,"j",(function(){return d})),o.d(t,"d",(function(){return p})),o.d(t,"c",(function(){return g})),o.d(t,"l",(function(){return b}));var r=o("b775"),a=o("d722");function i(e){return Object(r["a"])({url:a["a"].companyList,method:"get",params:e})}function n(e){return Object(r["a"])({url:a["a"].companyAdd,method:"post",data:e})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return"post"==t?Object(r["a"])({url:a["a"].companyEdit,method:t,data:e}):Object(r["a"])({url:a["a"].companyEdit,method:t,params:e})}function s(e){return Object(r["a"])({url:a["a"].companyAudit,method:"post",data:e})}function c(e){return Object(r["a"])({url:a["a"].companyImgList,method:"get",params:e})}function u(e){return Object(r["a"])({url:a["a"].companyImgAudit,method:"post",data:e})}function m(e){return Object(r["a"])({url:a["a"].companyImgDelete,method:"post",data:e})}function f(e){return Object(r["a"])({url:a["a"].companyInterviewList,method:"get",params:e})}function d(e){return Object(r["a"])({url:a["a"].companyInterviewVideoList,method:"get",params:e})}function p(e){return Object(r["a"])({url:a["a"].companyDownList,method:"get",params:e})}function g(e){return Object(r["a"])({url:a["a"].companyDelete,method:"post",data:e})}function b(e){return Object(r["a"])({url:a["a"].companySetService,method:"post",data:e})}}}]);