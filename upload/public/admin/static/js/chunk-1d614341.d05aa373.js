(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d614341"],{"15fd":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a4d3"),n("c975"),n("b64b");function i(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function r(e,t){if(null==e)return{};var n,r,o=i(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},5634:function(e,t,n){"use strict";var i=n("9a6b"),r=n.n(i);r.a},"9a6b":function(e,t,n){},c07e:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"积分套餐配置",lazy:!0}},[n("points_list")],1)],1)],1)},r=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"Loading",fit:"","highlight-current-row":"",data:e.list}},[n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),n("el-table-column",{attrs:{label:"积分数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.points))]}}])}),n("el-table-column",{attrs:{label:"服务价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.expense))]}}])}),n("el-table-column",{attrs:{label:"显示状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:e._f("colorFilter")(t.row.is_display)}},[e._v(" "+e._s(1==t.row.is_display?"显示":"隐藏")+" ")])]}}])}),n("el-table-column",{attrs:{label:"推荐"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:e._f("colorFilter")(t.row.recommend)}},[e._v(" "+e._s(1==t.row.recommend?"是":"否")+" ")])]}}])}),n("el-table-column",{attrs:{label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.sort_id))])]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.funEdit(t.$index,t.row)}}},[e._v(" 编辑 ")]),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){return e.funDelete(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])})],1),n("div",{staticClass:"spaceline"}),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.funAdd}},[e._v("添加")]),e.dialogFormVisible?n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"form",staticClass:"common-form",attrs:{model:e.form,"label-width":"120px",rules:e.rules,"inline-message":!1}},[n("el-form-item",{attrs:{label:"服务名称",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"积分数",prop:"points"}},[n("el-input",{attrs:{type:"number"},model:{value:e.form.points,callback:function(t){e.$set(e.form,"points",e._n(t))},expression:"form.points"}})],1),n("el-form-item",{attrs:{label:"服务价格",prop:"expense"}},[n("el-input",{attrs:{type:"number"},model:{value:e.form.expense,callback:function(t){e.$set(e.form,"expense",e._n(t))},expression:"form.expense"}}),e._v(" 元 ")],1),n("el-form-item",{attrs:{label:"排序",prop:"sort_id"}},[n("el-input",{attrs:{type:"number"},model:{value:e.form.sort_id,callback:function(t){e.$set(e.form,"sort_id",e._n(t))},expression:"form.sort_id"}})],1),n("el-form-item",{attrs:{label:"显示",prop:"is_display"}},[n("el-switch",{model:{value:e.form.is_display,callback:function(t){e.$set(e.form,"is_display",t)},expression:"form.is_display"}})],1),n("el-form-item",{attrs:{label:"推荐",prop:"recommend"}},[n("el-switch",{model:{value:e.form.recommend,callback:function(t){e.$set(e.form,"recommend",t)},expression:"form.recommend"}})],1),n("el-form-item",{attrs:{label:" "}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]),n("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)],1):e._e()],1)},s=[],l=(n("b0c0"),n("15fd")),a=n("5530"),c=n("b775"),u=n("d722");function d(e){return Object(c["a"])({url:u["a"].servicePointsList,method:"get",params:e})}function m(e){return Object(c["a"])({url:u["a"].servicePointsAdd,method:"post",data:e})}function f(e){return Object(c["a"])({url:u["a"].servicePointsEdit,method:"post",data:e})}function p(e){return Object(c["a"])({url:u["a"].servicePointsDelete,method:"post",data:e})}var b={filters:{colorFilter:function(e){return 1==e?"success":"danger"}},data:function(){var e=function(e,t,n){return t<=0?n(new Error("值必须大于0")):n()};return{dialogTitle:"",dialogFormVisible:!1,list:null,listLoading:!0,form:{id:"",name:"",points:"",expense:"",is_display:!0,recommend:!0,sort_id:0},rules:{name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],points:[{required:!0,message:"请输入积分数",trigger:"blur"}],expense:[{required:!0,message:"请输入服务价格",trigger:"blur"},{validator:e,trigger:"blur"}],sort_id:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0;var t={};d(t).then((function(t){e.list=t.data.items,e.listLoading=!1})).catch((function(){}))},addSave:function(e,t){var n=this;this.$refs[t].validate((function(t){if(!t)return!1;m(e).then((function(e){return n.$message.success(e.message),n.closeDialog(),n.fetchData(),!0})).catch((function(){}))}))},editSave:function(e,t){var n=this;this.$refs[t].validate((function(t){if(!t)return!1;f(e).then((function(e){return n.$message.success(e.message),n.closeDialog(),n.fetchData(),!0})).catch((function(){}))}))},onSubmit:function(e){var t=this,n=Object(a["a"])({},t.form);if(n.is_display=!0===n.is_display?1:0,n.recommend=!0===n.recommend?1:0,parseInt(n.id)>0)t.editSave(n,e);else{var i=n.id,r=Object(l["a"])(n,["id"]);console.log(i),t.addSave(r,e)}},funAdd:function(e,t){this.form={id:"",name:"",points:"",expense:"",is_display:!0,recommend:!0,sort_id:0},this.dialogTitle="添加套餐",this.dialogFormVisible=!0},funEdit:function(e,t){this.form={id:t.id,name:t.name,points:t.points,expense:t.expense,is_display:1==t.is_display,recommend:1==t.recommend,sort_id:t.sort_id},this.dialogTitle="编辑套餐",this.dialogFormVisible=!0},funDelete:function(e,t){var n=this;n.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e={id:t.id};p(e).then((function(e){return n.$message.success(e.message),n.fetchData(),!0})).catch((function(){}))})).catch((function(){}))},closeDialog:function(){this.dialogFormVisible=!1}}},g=b,_=(n("5634"),n("2877")),h=Object(_["a"])(g,o,s,!1,null,"58de40e6",null),v=h.exports,y={components:{points_list:v}},w=y,x=Object(_["a"])(w,i,r,!1,null,null,null);t["default"]=x.exports}}]);